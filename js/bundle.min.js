!function(){"use strict";function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var e=function(){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this._observers=[]}var n,r,o;return n=e,(r=[{key:"addObserver",value:function(t){this._observers.push(t)}},{key:"removeObserver",value:function(t){this._observers=this._observers.filter((function(e){return e!==t}))}},{key:"_notify",value:function(t,e){this._observers.forEach((function(n){return n(t,e)}))}}])&&t(n.prototype,r),o&&t(n,o),e}();function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var c,a=t[Symbol.iterator]();!(r=(c=a.next()).done)&&(n.push(c.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=s(t);if(e){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(s,t);var e,n,o,u=a(s);function s(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(t=u.call(this))._films=[],t}return e=s,o=[{key:"adaptToClient",value:function(t){var e=r(t,4),n=e[0],o=e[1],i=e[2],c=e[3];return{title:o.name||o.title,originalTitle:o.original_name||o.original_title,genres:o.genres||[],release:o.first_air_date||o.release_date||null,plot:o.overview||"",poster:o.poster_path||null,rating:o.vote_average||"-",id:o.id,type:n.media_type,crew:i.crew||[],imdbId:c.imdb_id||null,network:o.networks||[]}}}],(n=[{key:"setFilms",value:function(t,e){this._films=e.slice(),this._notify(t)}},{key:"getFilms",value:function(){return this._films}}])&&i(e.prototype,n),o&&i(e,o),s}(e),f="afterbegin",p="afterend",h="beforebegin",y="beforeend",b={SEARCH:{TYPE:"SEARCH",CLASS:"results",TITLE:"Search results for"},TRENDING:{TYPE:"TRENDING",CLASS:"trending",TITLE:"Currently trending titles"}},m="&page=1",d="&include_adult=false",v="INIT",_="ERROR",g="TRENDING",w="TRENDING",S="SEARCH",O="tv",k="movie",E="https://image.tmdb.org/t/p",j="/w500",P="img/poster-mock.jpg",C="rating-value--bad",R="rating-value--normal",T="rating-value--good",D="rating-value--not-yet-rated";function L(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var I="".concat("&language=en-US").concat(m).concat(d),x="GET",M=200,N=299,q=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._endPoint=e,this._apiKey=n}var e,n,r;return e=t,r=[{key:"toJSON",value:function(t){return t.json()}},{key:"checkStatus",value:function(t){return t.status<M||t.status>N?Promise.reject(t):t}},{key:"catchError",value:function(t){throw t}}],(n=[{key:"getTrending",value:function(){var e=this;return this._load({url:"trending/all/week"}).then(t.toJSON).then((function(t){return t.results.map((function(t){return Promise.all([t,e._getDetails(t),e._getCredits(t),e._getIds(t)])}))})).then((function(t){return Promise.all(t)})).then((function(t){return t.map(l.adaptToClient)}))}},{key:"searchFilm",value:function(e){var n=this;return this._load({url:"search/multi"},"".concat(I,"&query=").concat(encodeURI(e))).then(t.toJSON).then((function(t){return t.results.map((function(t){return Promise.all([t,n._getDetails(t),n._getCredits(t),n._getIds(t)])}))})).then((function(t){return Promise.all(t)})).then((function(t){return t.map(l.adaptToClient)})).then((function(t){return t.filter((function(t){return t.type===O||t.type===k}))}))}},{key:"_getDetails",value:function(e){return this._load({url:"".concat(e.media_type,"/").concat(e.id)}).then(t.toJSON)}},{key:"_getCredits",value:function(e){return this._load({url:"".concat(e.media_type,"/").concat(e.id,"/credits")}).then(t.toJSON)}},{key:"_getIds",value:function(e){return this._load({url:"".concat(e.media_type,"/").concat(e.id,"/external_ids")}).then(t.toJSON)}},{key:"_load",value:function(e){var n=e.url,r=e.method,o=void 0===r?x:r,i=e.body,c=void 0===i?null:i,a=e.headers,u=void 0===a?new Headers:a,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return fetch("".concat(this._endPoint,"/").concat(n,"?api_key=").concat(this._apiKey).concat(s),{method:o,body:c,headers:u}).then(t.checkStatus).catch(t.catchError)}}])&&L(e.prototype,n),r&&L(e,r),t}();function A(t){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function F(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function H(t,e){return(H=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function U(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=G(t);if(e){var o=G(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return B(this,n)}}function B(t,e){return!e||"object"!==A(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function G(t){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var J=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&H(t,e)}(i,t);var e,n,r,o=U(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this))._films=[],t}return e=i,(n=[{key:"setFilms",value:function(t,e){this._films=e.slice(),this._notify(t)}},{key:"getFilms",value:function(){return this._films}}])&&F(e.prototype,n),r&&F(e,r),i}(e);function Q(t){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function K(t,e){return(K=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function V(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=z(t);if(e){var o=z(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return $(this,n)}}function $(t,e){return!e||"object"!==Q(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function z(t){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var W=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&K(t,e)}(i,t);var e,n,r,o=V(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this))._error=null,t}return e=i,r=[{key:"adaptToClient",value:function(t){return{code:t.status_code,message:t.status_message}}}],(n=[{key:"setError",value:function(t,e){this._error=Object.assign({},e),this._notify(t)}},{key:"getError",value:function(){return this._error}}])&&Y(e.prototype,n),r&&Y(e,r),i}(e),X=function(t,e,n){switch(t instanceof et&&(t=t.getElement()),e instanceof et&&(e=e.getElement()),n){case f:t.prepend(e);break;case p:t.after(e);break;case h:t.before(e);break;case y:t.append(e)}},Z=function(t){if(null!==t){if(!(t instanceof et))throw new Error("Can remove only components");t.getElement().remove(),t.removeElement()}};function tt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var et=function(){function t(){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),(this instanceof t?this.constructor:void 0)===t)throw new Error("Can't instantiate Abstract, only concrete one.");this._element=null,this._callback={}}var e,n,r;return e=t,(n=[{key:"getTemplate",value:function(){throw new Error("Abstract method not implemented: getTemplate")}},{key:"getElement",value:function(){var t,e;return this._element||(this._element=(t=this.getTemplate(),(e=document.createElement("div")).insertAdjacentHTML("beforeend",t),e.firstChild)),this._element}},{key:"removeElement",value:function(){this._element=null}}])&&tt(e.prototype,n),r&&tt(e,r),t}();function nt(t){return(nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ot(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function it(t,e){return(it=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ct(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ut(t);if(e){var o=ut(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return at(this,n)}}function at(t,e){return!e||"object"!==nt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ut(t){return(ut=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var st=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&it(t,e)}(i,t);var e,n,r,o=ct(i);function i(){return rt(this,i),o.apply(this,arguments)}return e=i,(n=[{key:"getTemplate",value:function(){return'<div class="movie-loading">\n      <h3 class="movie-loading__text">Loading...</h3>\n    </div>'}}])&&ot(e.prototype,n),r&&ot(e,r),i}(et);function lt(t){return(lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ft(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ht(t,e){return(ht=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function yt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=mt(t);if(e){var o=mt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return bt(this,n)}}function bt(t,e){return!e||"object"!==lt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function mt(t){return(mt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var dt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ht(t,e)}(i,t);var e,n,r,o=yt(i);function i(){return ft(this,i),o.apply(this,arguments)}return e=i,(n=[{key:"getTemplate",value:function(){return'<div class="movie-not-found">\n      <h3>Nothing matches your search</h3>\n      <p>But don\'t give up – check the spelling or try less specific search terms.</p>\n    </div>'}}])&&pt(e.prototype,n),r&&pt(e,r),i}(et);function vt(t){return(vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function wt(t,e){return(wt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function St(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kt(t);if(e){var o=kt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ot(this,n)}}function Ot(t,e){return!e||"object"!==vt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function kt(t){return(kt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Et=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wt(t,e)}(i,t);var e,n,r,o=St(i);function i(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return _t(this,i),(e=o.call(this))._type=t,e._searchQuery=n,e}return e=i,(n=[{key:"getTemplate",value:function(){return t=this._type,e=this._searchQuery,n=t===b.SEARCH.TYPE?"".concat(b.SEARCH.TITLE," ").concat(e):b[t].TITLE,'<section class="'.concat(b[t].CLASS,'">\n      <h2 class="section-heading">').concat(n,'</h2>\n      <ul class="movie-list"></ul>\n    </section>');var t,e,n}},{key:"getContainer",value:function(){return this.getElement().querySelector(".movie-list")}}])&&gt(e.prototype,n),r&&gt(e,r),i}(et);function jt(t){return(jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ct(t,e){return(Ct=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Rt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Dt(t);if(e){var o=Dt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Tt(this,n)}}function Tt(t,e){return!e||"object"!==jt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Dt(t){return(Dt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Lt=function(t){var e,n,r,o=function(t){var e=new Image;return e.src=t.poster?"".concat(E).concat(j).concat(t.poster):P,e.alt=t.title,e.className="movie-poster",e.outerHTML}(t),i=(e=t.imdbId,"".concat("https://imdb.com/title/").concat(e)),c=function(t){var e=new Date(t.release).toLocaleString("default",{year:"numeric"}),n=t.title.replace(/ /g,"+");return"".concat("https://google.com/search?q=").concat(n,"+").concat(e)}(t),a=0===(n=t.genres).length?"Unknown":n.map((function(t){return t.name})).slice(0,3).join(", "),u=t.type===O?function(t){return t.network.length>0?t.network[0].name:"Unknown"}(t):function(t){return t.crew.length>0&&t.crew.find((function(t){return"Director"===t.job}))?t.crew.find((function(t){return"Director"===t.job})).name:"Unknown"}(t),s=function(t){if(t.length>200){var e=t.substring(0,200);return e=e.slice(0,Math.min(e.length,e.lastIndexOf(" "))),/(,| |\.)/g.test(e.charAt(e.length-1))&&(e=e.slice(0,-1)),e.concat("...")}return t}(t.plot),l=function(t){if(null===t)return"TBD";var e=new Date(t),n=e.toLocaleString("en-US",{day:"2-digit"}),r=e.toLocaleString("en-US",{month:"short"}),o=e.toLocaleString("en-US",{year:"numeric"});return"".concat(n," ").concat(r," ").concat(o)}(t.release),f=(r=t.rating)>=7?T:r<7&&r>=5?R:r<5&&r>0?C:D;return'<li class="movie-item">\n      <figure class="movie-card">\n        <div class="poster-wrapper">\n          '.concat(o,'\n        </div>\n        <figcaption class="movie-info">\n          <h3 class="movie-title">').concat(t.title,'</h3>\n\n          <p class="movie-prod">\n            <span class="production"><span>by&nbsp;</span><mark class="directed" title="').concat(t.type===O?"Network":"Director",'">').concat(u,'</mark><span>&nbsp;/&nbsp;</span></span><i class="released" title="Release date">').concat(l,'</i>\n          </p>\n\n          <p class="movie-rating" title="Movie rating">\n            <svg class="rating-svg" width="20" height="20">\n              <use xlink:href="img/sprite.svg#icon-star"></use>\n            </svg>\n            <b class="rating-value ').concat(f,'">').concat(t.rating,'</b><small class="rating-value--out-of">&nbsp;/&nbsp;10</small>\n          </p>\n\n          ').concat(t.genres.length>0?'<p class="movie-genre">\n        <svg class="genre-svg" width="20" height="20">\n          <use xlink:href="img/sprite.svg#icon-genre"></use>\n        </svg>\n        <i class="genre-value" title="'.concat(t.genres.length>1?"Genres":"Genre",'">').concat(a,"</i>\n      </p>"):"",'\n\n          <p class="movie-plot">\n            ').concat(s,'\n          </p>\n\n          <div class="links">\n            ').concat(t.imdbId?'<a href="'.concat(i,'" target="_blank" class="movie-link imdb-link">View on IMDb</a>'):"",'\n            <a href="').concat(c,'" target="_blank" class="movie-link google-link">Learn More</a>\n          </div>\n        </figcaption>\n      </figure>\n    </li>')},It=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ct(t,e)}(i,t);var e,n,r,o=Rt(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this))._film=t,e}return e=i,(n=[{key:"getTemplate",value:function(){return Lt(this._film)}}])&&Pt(e.prototype,n),r&&Pt(e,r),i}(et);function xt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Mt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._container=e,this._cardComponent=null}var e,n,r;return e=t,(n=[{key:"init",value:function(t){this._cardComponent=new It(t),X(this._container,this._cardComponent,y)}},{key:"destroy",value:function(){Z(this._cardComponent)}}])&&xt(e.prototype,n),r&&xt(e,r),t}();function Nt(t){return(Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function At(t,e){return(At=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ft(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Bt(t);if(e){var o=Bt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ht(this,n)}}function Ht(t,e){return!e||"object"!==Nt(e)&&"function"!=typeof e?Ut(t):e}function Ut(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Bt(t){return(Bt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Gt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&At(t,e)}(i,t);var e,n,r,o=Ft(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this))._formSubmitHandler=t._formSubmitHandler.bind(Ut(t)),t._searchInputHandler=t._searchInputHandler.bind(Ut(t)),t.getElement().querySelector("#query-search").addEventListener("input",t._searchInputHandler),t}return e=i,(n=[{key:"getTemplate",value:function(){return this._isDisabled,'<form method="get" class="search-form" role="search">\n      <fieldset>\n        <legend class="search-legend">Cast the Accio spell on any movie</legend>\n        <div class="fieldset-inner">\n          <div class="input-field">\n            <input type="search" id="query-search" class="search-input" name="query-search" autocomplete="off"\n              autocapitalize="off" required aria-label="Search for a movie or TV show" value placeholder="Search">\n            <label for="query-search" class="search-label">Cast here...</label>\n            <button class="button search-submit" type="submit" aria-label="Search button" title="Search" disabled>\n              <svg class="search-svg" width="20" height="20">\n                <use xlink:href="img/sprite.svg#icon-search"></use>\n              </svg>\n            </button>\n          </div>\n        </div>\n      </fieldset>\n    </form>'}},{key:"_formSubmitHandler",value:function(t){t.preventDefault();var e=this.getElement().querySelector("#query-search").value;this.getElement().querySelector("#query-search").disabled=!0,this.getElement().querySelector(".search-submit").disabled=!0,this._callback.formSubmit(e)}},{key:"setFormSubmitHandler",value:function(t){this._callback.formSubmit=t,this.getElement().addEventListener("submit",this._formSubmitHandler)}},{key:"_searchInputHandler",value:function(t){t.preventDefault();var e=t.target.value,n=this.getElement().querySelector(".search-submit");""===e||e.match(/^ *$/)||null===e?n.disabled=!0:n.disabled=!1}},{key:"enableInput",value:function(){this.getElement().querySelector("#query-search").disabled=!1,this.getElement().querySelector(".search-submit").disabled=!1}}])&&qt(e.prototype,n),r&&qt(e,r),i}(et);function Jt(t){return(Jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Yt(t,e){return(Yt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Kt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=$t(t);if(e){var o=$t(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Vt(this,n)}}function Vt(t,e){return!e||"object"!==Jt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function $t(t){return($t=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var zt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Yt(t,e)}(i,t);var e,n,r,o=Kt(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this))._error=t,e}return e=i,(n=[{key:"getTemplate",value:function(){return t=this._error,'<div class="error-message">\n      <h3>Network Error</h3>\n      <p>Status Error Code:&nbsp;<b class="error-code">'.concat(t.code,'</b>.<br>\n        Error Message:&nbsp;<span class="error-text">').concat(t.message,"</span></p>\n    </div>");var t}}])&&Qt(e.prototype,n),r&&Qt(e,r),i}(et);function Wt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Xt=function(){function t(e,n,r,o,i,c){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._searchContainer=e,this._listContainer=n,this._filmsModel=r,this._searchModel=o,this._errorModel=i,this._api=c,this._cardPresenter={},this._isLoading=!0,this._mode=g,this._searchQuery=null,this._loadingComponent=new st,this._searchComponent=new Gt,this._noDataComponent=new dt,this._errorComponent=null,this._filmsListComponent=null,this._handleModelEvents=this._handleModelEvents.bind(this),this._handleFormSubmit=this._handleFormSubmit.bind(this)}var e,n,r;return e=t,(n=[{key:"init",value:function(){this._filmsModel.addObserver(this._handleModelEvents),this._searchModel.addObserver(this._handleModelEvents),this._errorModel.addObserver(this._handleModelEvents),this._renderSearch(),this._renderBoard()}},{key:"_getFilms",value:function(){switch(this._mode){case w:return this._filmsModel.getFilms();case S:return this._searchModel.getFilms()}return[]}},{key:"_getError",value:function(){return this._errorModel.getError()}},{key:"_handleModelEvents",value:function(t){switch(t){case v:this._isLoading=!1,this._clearBoard(),this._renderBoard();break;case _:this._isLoading=!1,this._clearBoard(),this._renderError()}}},{key:"_renderLoading",value:function(){X(this._listContainer,this._loadingComponent,f)}},{key:"_renderNoData",value:function(){X(this._listContainer,this._noDataComponent,f)}},{key:"_renderSearch",value:function(){this._searchComponent.setFormSubmitHandler(this._handleFormSubmit),X(this._searchContainer,this._searchComponent,y)}},{key:"_handleFormSubmit",value:function(t){var e=this;this._mode=S,this._searchQuery=t,this._api.searchFilm(t).then((function(t){return e._searchModel.setFilms(v,t)})).finally((function(){return e._searchComponent.enableInput()}))}},{key:"_renderError",value:function(){this._errorComponent=new zt(this._getError()),X(this._listContainer,this._errorComponent,y)}},{key:"_renderCard",value:function(t){var e=new Mt(this._filmsListComponent.getContainer());e.init(t),this._cardPresenter[t.id]=e}},{key:"_renderMovieList",value:function(){var t=this;switch(this._mode){case w:this._filmsListComponent=new Et(b.TRENDING.TYPE);break;case S:this._filmsListComponent=new Et(b.SEARCH.TYPE,this._searchQuery)}X(this._listContainer,this._filmsListComponent,f),this._getFilms().forEach((function(e){return t._renderCard(e)}))}},{key:"_clearBoard",value:function(){Object.values(this._cardPresenter).forEach((function(t){return t.destroy()})),this._cardPresenter={},Z(this._loadingComponent),Z(this._noDataComponent),Z(this._filmsListComponent),Z(this._errorComponent)}},{key:"_renderBoard",value:function(){this._isLoading?this._renderLoading():this._getFilms().length?this._renderMovieList():this._renderNoData()}}])&&Wt(e.prototype,n),r&&Wt(e,r),t}(),Zt=new q("https://api.themoviedb.org/3","fae583c1b46b878dbb53f8088eb03af6"),te=new l,ee=new J,ne=new W;new Xt(document.querySelector(".header-inner"),document.querySelector(".site-content .container"),te,ee,ne,Zt).init(),Zt.getTrending().then((function(t){return te.setFilms(v,t)})).catch((function(t){return q.toJSON(t).then((function(t){return ne.setError(_,W.adaptToClient(t))}))}))}();